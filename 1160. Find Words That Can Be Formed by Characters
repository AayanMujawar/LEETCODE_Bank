#include <stdio.h>
#include <string.h>

int countCharacters(char **words, int wordsSize, char *chars) {
    int charsCount[26] = {0};

    // Count frequency of each character in chars
    for (int i = 0; chars[i] != '\0'; i++) {
        charsCount[chars[i] - 'a']++;
    }

    int total = 0;

    // Process each word
    for (int w = 0; w < wordsSize; w++) {
        char *word = words[w];
        int wordCount[26] = {0};
        int good = 1;

        // Count word characters
        for (int i = 0; word[i] != '\0'; i++) {
            int idx = word[i] - 'a';
            wordCount[idx]++;

            // If exceeds available chars, reject early
            if (wordCount[idx] > charsCount[idx]) {
                good = 0;
                break;
            }
        }

        if (good) {
            total += strlen(word);
        }
    }

    return total;
}
