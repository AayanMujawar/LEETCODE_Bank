int* nodesBetweenCriticalPoints(struct ListNode* head, int* returnSize) {
    *returnSize = 2;
    
    int* result = (int*)malloc(2 * sizeof(int));
    result[0] = -1;
    result[1] = -1;

    if (!head || !head->next || !head->next->next)
        return result;

    struct ListNode* prev = head;
    struct ListNode* curr = head->next;

    int index = 1;
    int first = -1, last = -1, prevCritical = -1;
    int minDist = INT_MAX;

    while (curr->next) {
        index++;

        int isCritical =
            (curr->val > prev->val && curr->val > curr->next->val) ||
            (curr->val < prev->val && curr->val < curr->next->val);

        if (isCritical) {
            if (first == -1) {
                first = index;
            } else {
                minDist = index - prevCritical < minDist
                          ? index - prevCritical
                          : minDist;
            }
            prevCritical = index;
            last = index;
        }

        prev = curr;
        curr = curr->next;
    }

    if (first != -1 && first != last) {
        result[0] = minDist;
        result[1] = last - first;
    }

    return result;
}
